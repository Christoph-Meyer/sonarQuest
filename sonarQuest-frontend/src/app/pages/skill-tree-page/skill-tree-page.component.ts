import { Component, OnInit } from '@angular/core';
import { UserSkill } from '../../Interfaces/UserSkill';
import { SkillTreeService } from '../../services/skill-tree.service';
import { NestedTreeControl } from '@angular/cdk/tree';
import { MatTreeNestedDataSource } from '@angular/material/tree';
import * as shape from 'd3-shape';
import { NgxGraphModule } from '@swimlane/ngx-graph';
import { UserSkillGroup } from 'app/Interfaces/UserSkillGroup';
import { Router, RouterModule } from '@angular/router';
import { RoutingUrls } from 'app/app-routing/routing-urls';
import { PermissionService } from 'app/services/permission.service';


@Component({
  selector: 'app-skill-tree-page',
  templateUrl: './skill-tree-page.component.html',
  styleUrls: ['./skill-tree-page.component.css']
})
export class SkillTreePageComponent implements OnInit {

  userSkillGroupTree: { nodes: [], links: [] };
  curve = shape.curveLinear
  nodecolor = "#c0c0c0";
  isAdmin = false;
  isGamemaster = false;
  // curve = shape.curveLinear;


  constructor(private skillTreeService: SkillTreeService,
    private router: Router,
    private permissionService: PermissionService) { }

  ngOnInit() {

    this.isAdmin = true && this.permissionService.isUrlVisible(RoutingUrls.admin);
    this.isGamemaster = true && this.permissionService.isUrlVisible(RoutingUrls.gamemaster);

    this.skillTreeService.userSkillGroupTree$.subscribe(userSkillGroupTree => {
      this.userSkillGroupTree = userSkillGroupTree;
    });
    this.skillTreeService.getData();
    // this.showGraph();
  }
  navigatToInnerSkilLTree(id: number) {
    this.router.navigate([RoutingUrls.innerskilltree, id]);
    console.log(RoutingUrls.innerskilltree);
  }

  /*showGraph() {
    
    console.log("####### Data from Server#####");
    console.log(this.userSkillGroupTree)
  
  }*/

  getSkillGroupIcon(icon: String): String {
    switch (icon) {
      case 'ra-shield': {
        return 'M511.992 928.008c49.995-48.013 200.006-143.987 299.997-143.987 0-48.013 0-143.987 0-192 0-192-150.011-480-299.997-623.987-150.011 143.987-299.997 431.987-299.997 623.987 0 48.013 0 143.987 0 192 100.016-0.025 250.002 95.975 299.997 143.987v0z'

      }
      case 'ra-fairy-wand': {
        return 'M826.801 644.087l93.146 211.044-211.046-93.146-171.932 153.802 23.373-229.498-199.404-115.988 172.493-37.247c-16.95-15.52-34.714-33.475-53.009-51.768v-0.003l-462.031-456.829v-65.269h90.566l450.044 443.511c16.416 16.417 30.864 31.602 43.247 45.647l32.87-152.22 115.988 199.404 229.498-23.373-153.802 171.932z'

      }
      case 'ra-x-mark':{
       return 'M836.968 327.119c-10.041 4.297-31.777-7.131-57.498-26.575l-147.463 147.463 147.474 147.474c25.715-19.439 47.447-30.864 57.486-26.567 35.708 15.303 173.402 336.64 152.998 357.046-20.405 20.423-341.742-117.29-357.045-152.998-4.302-10.038 7.118-31.766 26.554-57.476l-147.474-147.473-147.473 147.473c19.436 25.712 30.856 47.439 26.554 57.476-15.303 35.708-336.638 173.421-357.043 152.998-20.405-20.406 117.29-341.742 152.998-357.046 10.039-4.297 31.771 7.128 57.486 26.567l147.474-147.474-147.463-147.463c-25.72 19.444-47.457 30.872-57.498 26.575-35.709-15.303-173.402-336.64-152.998-357.045 20.405-20.425 341.742 117.288 357.045 152.998 4.302 10.036-7.114 31.759-26.545 57.464l147.463 147.464 147.464-147.464c-19.429-25.705-30.845-47.429-26.545-57.464 15.303-35.709 336.64-173.422 357.045-152.998 20.406 20.405-117.288 341.742-152.996 357.045z'

      }
      case 'ra-diamond':{
        return 'M854.688 770.722h-687.528l-145.385-195.843 491.002-538.081 491.002 538.081-149.091 195.843zM512.778 42.528l-192.666 528.745 192.664 196.661 192.664-196.661-192.662-528.745zM305.311 581.705l-148.246 195.664zM716.815 581.705l145.914 195.664zM305.311 571.627h411.504v-18.375h-411.504v18.375z'

      }
      case 'ra-leaf':{
        return 'M898.619 654.923c-1.848-5.569-3.742-11.172-5.638-16.807 21.572-105.467 13.594-220.065-40.816-345.175 7.896 80.356 6.59 157.217-5.828 230.894-14.657-28.517-33.349-56.146-52.473-83.961 2.713-79.902-12.176-164.233-51.31-254.216 6.278 63.909 5.128 125.514-1.164 185.418-25.628-29.141-54.235-57.15-86.293-82.797-7.591-50.672-21.875-103.145-45.482-157.43 4.235 43.137 4.915 85.749 3.496 127.106-71.065-48.332-155.463-86.983-257.712-108.447 86.103 48.325 154.818 98.182 211.068 149.265-37.003 7.709-75.076 12.777-113.113 16.326 50.288 12.707 99.963 17.665 148.101 16.326 34.398 35.177 63.139 70.557 86.293 107.284-64.163 11.538-129.101 14.874-194.745 10.492 75.37 36.473 150.451 49.212 225.061 44.313 19.277 39.682 32.454 80.729 41.981 122.441-56.743 5.362-118.52-8.102-188.914-25.655 63.562 58.228 132.266 83.52 200.574 90.959 3.553 28.903 5.422 57.86 5.76 87.718-315.121 224.233-231.651-529.919-725.274-651.082 406.167-251.603 1192.676 113.245 846.43 537.029zM825.227 900.939c20.091 9.774 44.48 10.349 62.972-6.996 10.554-99.306-21.77-309.203-149.265-455.959 97.235 177.214 104.361 305.538 86.293 462.952v0.003z'

      }
      case 'ra-book':{
        return 'M983.293 364.413l-67.594 22.31 1.591-1.665-373.85-135.67-357.881 378.335-87.855 28.998c-44.338-31.379-49.323-120.782-19.511-151.87l441.774-454.079 467.257 167.304c-42.553 23.261-77.1 89.476-3.93 146.337zM495.156 241.88l-368.136 381.698h11.020l366.51-374.19-9.393-7.508zM523.302 64.41c0 0-50.929 59.504 15.072 138.695l400.039 144.866c0 0-46.001-78.994 7.832-125.649l-422.944-157.912zM185.558 627.724l-12.216 12.914 372.938 132.431 369.42-386.344 67.592-22.31c-0.33-0.256-0.641-0.514-0.967-0.771l7.884 2.814-435.941 452.001-454.798-162.317 86.088-28.416z'

      }
      case 'ra-hammer':{
       return 'M908.6 726.515l-136.125 20.49 39.697 52.466-164.665 125.696-41.844-55.291c-68.147 40.258-138.278 57.66-190.048 52.366l0.008-0.045c-7.397-0.71-14.415-2.496-21.001-4.144-20.677-5.194-36.749-14.677-46.885-28.079l173.173-132.138-38.623-51.055 32.544-24.842c-175.114-215.419-375.756-400.022-488.622-648.708l99.201-75.088c212.64 184.728 326.649 414.144 490.772 646.438l30.77-23.487 39.697 52.466 56.731-125.422 85.081-64.365c104.533 43.94 151.101 121.687 165.223 218.358l-85.084 64.383z'

      }
      case 'ra-tower':{
        return 'M905.017-20.080l-57.307 185.374h-78.581v376.693l122.113 151.378v221.879h-128.636v-104.655h-78.302v104.655h-130.035v-104.655h-76.9v104.655h-130.035v-104.655h-76.902v104.655h-128.648v-221.879l122.113-151.378v-376.693h-78.579l-57.307-185.374z'

      }
      default: {
       return 'M996.95 353.994c0 211.676-70.023 457.178-248.753 572.707l-0.002 0.003-47.112-72.874c45.387-27.92 69.211-53.788 92.22-99.495-15.92-22.032-27.83-48.668-37.831-78.708 8.142-18.115 14.020-50.442 14.045-71.849l-71.682 11.698-61.884-67.948-49.75 101.921c-65.452-80.468-85.069-114.28-186.263-107.385l-28.604 88.231-102.014-19.763c0 0-18.594 101.623-49.829 124.382 8.768 36.649 34.876 69.076 82.515 98.282l-45.253 83.798c-165.621-116.125-232.981-346.879-232.981-563.001 185.518-93.299 240.866-199.324 230.554-311.836 27.66-15.575 56.27-31.047 89.795-40.040 45.851-12.3 95.033-18.206 145.612-18.2 50.579 0.008 102.377 5.9 150.466 18.2 43.541 11.139 83.051 28.537 118.916 49.75-1.604 109.456 58.064 217.606 237.835 302.127zM375.055 297.686c-56.42-32.576-122.325-24.237-146.721 18.016-13.925 24.115-10.9 54.025 4.291 81.507l-0.002 0.002c25.628 0.438 55.842 5.586 88.376 18.019 30.994 11.839 60.045 28.061 83.228 45.472 11.982-6.298 22.424-15.768 29.173-27.454 24.396-42.256-1.926-102.986-58.346-135.562zM429.429 93.285c19.698 72.138 43.382 144.274 80.929 216.411 0 0.002-0.002 0.002-0.002 0.003h0.003c0-0.002-0.002-0.002-0.002-0.003 37.003-72.138 66.358-144.274 80.929-216.411-53.955 16.459-107.906 18.654-161.859 0zM792.215 315.7c-24.397-42.251-90.302-50.592-146.721-18.016s-82.742 93.306-58.345 135.562c6.749 11.687 17.191 21.157 29.173 27.454 23.181-17.411 52.234-33.633 83.228-45.472 32.536-12.433 62.748-17.582 88.376-18.019l-0.002-0.002c15.19-27.483 18.215-57.391 4.29-81.507zM210.688 723.473c10.564 27.87 17.744 61.627 51.873 83.574zM804.393 744.075c-11.623 22.029-30.887 60.496-54.038 77.777z'
      }
    }
  }
}
